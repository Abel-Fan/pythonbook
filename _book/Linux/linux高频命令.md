## Linux高频命令
#### linux的运行方式
    图形运行方式
    - 本地使用KDE/Gnome集成环境
    - 运行xserver远程使用图形环境
    命令行（字符运行）方式
    - 本地虚拟终端
    - 使用Telnet远程登陆
    - 使用ssh远程登陆

#### 字符界面的使用
    为什么要使用字符工作的方式
    - 可以高效的完成任务
    - 远程登录操作均可以使用字符工作方式
    - 节省系统资源
    进入字符模式的方式
    - 图形环境下，右键菜单->终端
    - 系统启动后直接进入字符模式
    - 选择telnet或ssh登陆字符模式
    ssh user@ip
#### 本地登陆和远程登陆
    本地登陆
    虚拟控制台
    在系统启动时直接进入字符工作方式看，系统提供了多个（默认为6个）虚拟控制台，每个虚拟控制台可以互相独立使用，互不影响。
    可以使用Alt+F1(F6)进行多个虚拟控制台之间的切换
    虚拟控制台下登陆linux
    linux严格区分大小写，无论用户名，还是文件名，设备名都是如此
    基于安全的考虑，一般应该使用普通用户登陆系统，不要使用root登陆，当需要超级用户的工作时，可以使用su命令切换为超级用户身份
    logout登出 exit退出都是注销操作
    命令提示符#为root $为普通用户
    远程登陆
    linux下远程登陆另外一台linux服务器
    linux下的ssh命令时OpenSSH的客户端程序，要登陆远程的linux系统，必须保证远程系统上启动了OpenSSH服务器，使用ssh命令登陆远程OpenSSH服务器的命令格式是：
    $ssh 远程主机上的用户名@远程主机的ip地址或主机名
    $ssh ip地址
    window下利用ssh工具登陆一台linux服务器
    SecureCRT.exe
    xshell
#### linux 的系统运行级别
    0-关机状态
    1-单用户工作状态，用于维护
    2-多用户模式（NFS来启动）
    3-多用户模式，字符界面
    4-系统未使用，留给用户自定义
    5-多用户模式，并且在系统启动后运行x window,给出一个图形化的登陆窗口
    6-所用进程终止，重新启动。
    查看当前系统的运行级别
    # runlevel
    切换运行级别
    # init[0-6]
#### linux 命令的习惯
    - 命令及参数区分大小写
    - 程序可执行与扩展名无关
    - 使用tab键来进行补全
    $command [-options] parameter1 parameter2
     指令     选项      参数一     参数二
    说明：
    1.一行命令中第一输入的绝对是指令或可执行文件
    2.严格区分大小写

![image](../static/ubuntu1.png)
#### linux的目录结构
目录| 级别
---|---
/| Linux文件系统的入口，也是处于最高一级的目录
/bin|基本系统所需要的命令，功能和/user/bin类似，这个目录中的文件都是可执行的，普通用户都可以使用的命令
/boot|内核和加载内核所需的文件，一般情况下，GRLB系统引导管理器也位于这个目录,开机所需的文件
/dev|设备文件存储目录，比如终端、硬盘
/etc|所有系统配置文件，用户，密码等信息
/home|普通用户默认存放目录，家目录
/lib|库文件和内核模块所存放目录，系统的函数库
/media|即插即用存储设备的挂载点自动在这个目录下创建，比如U盘、CDRCM、DVD自动挂载后，也会在这个目录下创建一个目录
/mnt|临时文件的挂载点目录，没有media时起到media的功能
/opt|第三方软件存放目录，例如桌面KDE
/root|linux超级权限用户root的家目录
/sbin|基本的数据维护命令，只能由超级用户使用
/srv|该目录存放一些网络服务器启动之后需要提取的数据,
/tmp|临时文件目录，一般使用者，或是正在执行的程序暂时存放档案的地方
/usr|存放用户使用系统命令和应用程序等信息，比如命令，帮助文件
/var|存放经常要用的数据，比如应用程序运行时所需缓存，所需资源

#### 几个特殊的文件系统
文件系统|挂载点|说明
---|---|---
root|/|linux系统运行的基点，根文件系统不能被卸载
proc|/proc|以文件系统的方式为访问系统内核数据操作提供接口，适用于2.4和2.6内核使用
sysfs|/sys|以文件系统的方式为访问系统内核数据操作提供接口，2.6内核使用
tmpfs|/dev /var/run /var/lock |程序访问共享资源时使用的文件系统
usbfs|proc/bus/usb|访问usb设备时使用的文件系统
devpts|/dev/pts|内核用来与为终端（以这种方式登陆）进行交互的文件系统
swap|内核使用的特殊文件系统|用来创建虚拟内存

#### 简单的指令
    ls  显示目录
        用法：ls [参数] [目录名]
        ls参数：
            -a 显示所有目录，包括隐藏文件
            -l 以长格式显示
            -t 按修改时间先后显示
            -R 显示目录以及子目录
                一般用tree代替
                sudo apt-get install tree
            -m 横向输出文件名，并以","作为分割符
            -s 以文件大小排序
    ll  列出文档的资料
    ll / 列出根目录
    ll -a 列出全部文件包括隐藏目录
    clear 清除屏幕
    history 打开历史记录命令
        用法： history 选项 命令
        选项：-c 清空当前历史记录缓存
              -a 将历史记录缓存写入历史命令文件中   
              -r 将历史记录缓存读入当前历史缓存区
              -w 将当前历史记录缓存写入到历史命令文件中
              -d 删除当前历史记录缓存
        参数：n 打印最近n条
        其他：历史记录总数1000条由环境变量HISTSIZE
              使用某一条  !n
    exit 退出shell
    date 设置时间
        :显示当前时间"format"
        -d 例如：date -d "2 days ago"
        -s 设置时间
        -u utf时间
    cd 工作目录切换
    pwd 显示当前目录
        / 根目录
        ~ 家目录
        . 当前目录
        .. 上一级目录
        - 上一层目录
        
#### 文档管理
##### 目录的建立与删除
    mkdir 建立目录
        用法：mkdir [参数] {目录名}
        参数： -p 可以一次性创建整个目录树
    rmdir 删除目录
        用法：rmdir [参数] {目录名}
        删除空的目录
        -p 是当子目录被删除后使它也成为空目录的话，则顺便一并删除
        如：rmdir -p aaa/bbb
        在工作目录下的 aaa 目录中，删除名为 bbb 的子目录。若 bbb 删除后，aaa 目录成为空目录，则aaa亦予删除,否则只删除bbb，aaa则不予删除
    rm  删除文件
        用法：rm {文件}
        -i 删除前逐一询问确认。
        -f 即使原档案属性设为只读，亦直接删除，无需逐一确认。
        -r 将目录及以下之档案亦逐一删除。
        
        
    tree 显示文件和目录树（需要安装 sudo apt install tree）
        用法： tree [参数] {文件}
        参数：-a 显示全部文件包括隐藏文件
             -d 只显示目录不显示文件
             -f 每个文件都显示路径
             -t 根据最后修改的时间排序
             -L n 只显示n层目录
##### 正则
    * 代表0个或多个
    ? 代表0个或1个
    [] 原子表
    [^]
##### 文档目录的复制删除
    cp 复制目录
        用法：cp [参数] {源文件} {目标文件}
        选项：-r 递归执行（可复制目录树）
             -p：除复制文件的内容外，还把修改时间和访问权限也复制到新文件中。
##### 特殊档名的处理方式
    处理中间由空格的文档,用"\"来转义
    处理以“-”开头的文档，用绝对路径相对路径的方法
##### 隐藏文件的查看以及类型
    ls -a
    ll -a
    ll -d .*
##### 文档的移动与重命名
    mv 移动或重命名文件
        用法：mv [参数] {源文件} {目标文件} 把源文件更改为目标文件
             mv [参数] {源文件...} {目标文件} 把一个文件同时移动到目标文件中
        -i: 若指定目录已有同名文件，则先询问是否覆盖旧文件;
        -f: 在mv操作要覆盖某已有的目标文件时不给任何指示;
##### 大量建立空白档案的方式
    mkdir 创建目录
    touch 创建文件
    touch text{1,2,3,4}
## 档案内容的查询
##### 连续输出档案内容
    cat：将档案内容全部列出
    head：预设只列出档案最前面10 行
    tail：预设只列出档案最后面10 行
##### 可检索档案的内容
    more 软体内常用指令：
        /关键字：可以查询关键字
        空格键：可以向下/向后翻页
        q：结束离开不再查询文件
        
    less 软体内常用指令：
        /关键字：可以查询关键字
        空白键：可以向下/向后翻页
        [pageup]：可以向前/向上翻页
        [pagedown]：可以向下/向后翻页
        g：直接来到第一行
        G：直接来到最后一行
        q：结束离开不再查询文件
        
##### 软链接与硬链接
    软链接可以看作是Windows中的快捷方式，可以让你快速链接到目标档案或目录。
    硬链接则透过文件系统的inode来产生新档名，而不是产生新档案。
    命令：
        软链接（符号链接） ln -s   source  target 
        硬链接 （实体链接）ln      source  target
    必要参数:
        -b 删除，覆盖以前建立的链接
        -d 允许超级用户制作目录的硬链接
        -f 强制执行
        -i 交互模式，文件存在则提示用户是否覆盖
        -s 软链接(符号链接)
        -v 显示详细的处理过程
##### 压缩解压
    tar (选项) dest (mode) source 选项
    选项：（独立功能压缩解压，只能用其中一个）
        -x：解压
        -t：查看内容
        -r：向压缩归档文件末尾追加文件
        -u：更新原压缩包中的文件
    可选指令：
        -z：有gzip属性的
        -j：有bz2属性的
        -Z：有compress属性的
        -v：显示所有过程
        -O：将文件解开到标准输出
    必选参数：
        -f
    mode
      -C 解压到指定目录
    dest
      打包后的文件名  xxx.tar
      打包并压缩成gzip格式     xxx.tar.gz
      打包并压缩成bz2格式     xxx.tar.bz2
    source
      要打包的文件
       
    zip 压缩
        zip dest source
    unzip (-d) (path) 解压
        unzip dest
##### 文件传输
    scp (可选参数) file_source file_target 可选参数
      $ -r 递归拷贝目录
      $ -v：详细方式显示输出。scp和ssh(1)会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题
      $ -P port：注意是大写的P, port是指定数据传输用到的端口号
    file_source
      $ 要拷贝的源文件
    file_target
      $ 目标地址
    案例
      $ 本地文件上传服务器 scp -r local_folder remote_username@remote_ip:remote_folder
      $ 从服务器下载本地文件 scp -r remote_username@remote_ip:remote_folder local_folder

    windows和linux传输文件
    下载PSCP.exe,配置Windows的环境变量Path，或者直接通过命令行访问到pscp.exe
    把本地文件file传输到Linxu服务器的目录中
    $ pscp  -r 本地目录 用户名@LinuxIP:目录
    从Linux向Windows复制文件或目录
    $ pscp  -r 用户名@LinuxIP:目录 本地目录

## vim编辑器
##### 
##### 简单操作
##### 常用指令

#### 使用者与群组
###### 定义
    用户：
    群组：
    其他人：
###### 用户档案
    /etc/passwd 保存系统账号、用户账号、root信息
        每一行用:分割
        账户名称
        密码[x]
        UID:root为0 其余为1-999系统账号，1000-60000一般用户
        GID: 组id
        使用者信息
        家目录
        Shell
    /etc/shadow 保存用户密码信息
        每一行用:分割
        账号名称
        密码
        最近更改时间
        密码不可更改天数
        密码需要重新变更的天数
        密码需要重新变更提前警告天数
        密码过期宽限天数
        账号失效日
        保留（日后新添加功能）
    /etc/group  保存linux所有群组信息
        每一行用:分割
        群组名称
        群组密码
        GID
        此群组支援账号
#### 账号管理
###### 查看当前账号
    whoami 查看当前用户
    who 查看所有登陆用户
    
###### 新增与移除使用者,useradd,相关设定档，passwd,usermod,userdel
    useradd
    useradd [-u UID] [-g初始化群组] [-G次要群组] [-mM]
    [-c说明栏] [-d家目录绝对地址] [-s shell] 使用者账号名
    选项和参数：
    -u: 后面接的是UID，是一组数字。直接指定一个特定的UID 给这个账号
    -g: 后面接的那个群组名称就是initialgroup
        该群组的GID 会放置到/etc/passwd 的第四个栏位内
    -G: 后面接的群组名称则是这个账号还可以加入的群组。
        这个选项与参数会修改/ect/group内的相关资料
    -M: 强制！不要建立使用者家目录！(系统账号预设值)
    -m: 强制！要建立使用者家目录（一般账号预设值）
    -c: 这个就是/etc/passwd的第五栏的说明内容
    -d: 指定某个目录成为家目录，不使用预设值。使用绝对路径！
    -r: 建立一个系统的账号，这个账号的UID会有限制（参考/etc/login.defs）
    -s: 后面接一个shell，若没有指定则预设是/bin/bash的
    -e: 后面接一个日期 格式为[yyyy-mm-dd]此项目可写入shadow第八栏位
        账号失效日的设定项目
    -f: 后面接shadow的第七栏目项目，指定密码是否会失效。0为立刻失效，-1为永远不失效
    
    查看系统预设值
    命令 useradd -D
        GROUP=100
        HOME=/home
        INACTIVE=-1 密码过期后失效的设定值
            0 立刻失效
            -1 永不失效
            30 30天后失效
        EXPIRE= 账号失效的日期
        SHELL=/bin/sh 预设使用的shell
        SKEL=/etc/skel 使用者家目录参考基准目录
        CREATE_MAIL_SPOOL=no 建立使用者的mailbox
    passwd 使用useradd建立了账号之后，在预设的情况下，该账号暂时是封锁的，也就是说账号无法登入，只要设定密码就可以解除封锁
    命令
    passwd 用户名（如果不加用户名则修改本用户密码）
    chage 除了passwd-S外，更详细的密码参数显示命令
    
    userdel 删除用户
    语法：userdel [-f] username
        -r:连同使用者的家目录也一起删除

#### 群组管理
######新增与移除群组
    groupadd 新增群组
    groupadd [-g gid] [-r]群组名称
    选项与参数：
        -g:直接给予某个GID
    groupmod
    跟usermod 类似，这个指令仅是在进行group相关参数的修改
    groupmod [-g gid] [-n group_name]
    选项与参数：
    -g：修改既有的GID数字
    -n:修改既有的群组名称
    groupdel 删除群组
        groupdel [groupname]
    gpasswd:群组管理员功能
        如果系统管理员太忙碌了，导致某些账号想要加入某个专案找不到人帮忙！这个时候可以建立群组管理员
        命令gpasswd groupname
        系统管理员做的动作
        选项与参数：
            ：当没有任何参数时，表示给予groupname一个密码
            -A：将groupname的主控权交由后面的使用者管理
            -M：将某些账号加入这个群组当中
            -r:将groupname的密码移除
            -R:让groupname的密码失效
        群组管理员做的动作
            gpasswd [-ad] user groupname
            选项与参数：
                -a:将某位使用者加入到groupname这个群组当中
                -d:将某位使用者移出groupname这个群组当中
#### linux档案权限概念
![image](img/ls.png)
###### 查看权限
    ls -l   
    getfacl 文件
###### 修改权限
    chown 修改文档拥有者
        chown 用户 文档
    chgrp 修改文档拥有的群
        chgrp 组 文档
    chmod 修改文档操作权限
        chmod u=rwx,g=rw,o=r 文件

 